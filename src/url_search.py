import pandas as pd 
from googlesearch import search_news
df = pd.read_excel('Malware_name.xlsx')
for i in range(1,63):
    malware_name = df[df['family'] ==i].values[:,0]
    print(malware_name)
    num = len(malware_name)
    n = int(200/num/2)
    txt = str(i)+".txt"
    f = open('../url/'+txt,"a")
    j = 0
    # search blog
    for name in malware_name:
        search_name = "IoT Malware "+name
        #search_name = name
        for url in search_news(search_name,stop=n,tbs="nrt:b"):
            j+=1
            print(j)
            f.write(url+'\n')
    # search news
    for name in malware_name:
        search_name = "IoT Malware "+name
        #search_name = name
        for url in search_news(search_name,stop = n):
            f.write(url+'\n')
    f.write(str(j))
    f.close()
        
